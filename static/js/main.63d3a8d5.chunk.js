(this["webpackJsonpmeasurement-assistant-portal"]=this["webpackJsonpmeasurement-assistant-portal"]||[]).push([[0],{1035:function(e,t,n){},1045:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(23),r=n.n(c),o=(n(276),n(2)),i=n(34),u=n.n(i),l=n(69),j=n(14),b=n(252),d=n(1051),p=n(1050),h=n(1052),m=n(170),g=n(120),O=n(63),f=n(64),x=n(169),v=n.n(x),k=function(){function e(){Object(O.a)(this,e)}return Object(f.a)(e,[{key:"createUser",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.googleId,a=t.profileObj.email,s=t.tokenId,e.prev=4,e.next=7,v()({url:"https://measurment-assistant.herokuapp.com/api/user",method:"POST",headers:{Authorization:s},data:{googleId:n,email:a}});case 7:return c=e.sent,e.abrupt("return",c.data.userData);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccessKey",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n,a){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()({url:"https://measurment-assistant.herokuapp.com/api/user/accesskey",method:"PUT",headers:{Authorization:n},data:{googleId:a,email:t}});case 3:return s=e.sent,e.abrupt("return",s.data.userData);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),y=(n(1035),n(1036),n(1));var I=function(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),r=Object(j.a)(c,2),i=r[0],O=r[1],f=Object(a.useState)(!1),x=Object(j.a)(f,2),v=x[0],I=x[1];Object(a.useEffect)((function(){n.accessKey&&n.username&&O(!0)}),[n]);var w=new k,S=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,c,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createUser(t);case 2:n=e.sent,a=n.accessKey,c=n.username,r=t.tokenId,o=t.googleId,s({accessKey:a,username:c,tokenId:r,googleId:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.updateAccessKey(n.username,n.tokenId,n.googleId);case 2:"Error"==(t=e.sent).name?I(!0):(a=t.accessKey,s(Object(o.a)(Object(o.a)({},n),{},{accessKey:a})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(d.a,{bg:"light",expand:"lg",children:Object(y.jsxs)(p.a,{children:[Object(y.jsx)(d.a.Brand,{href:"#home",children:"Measurement Assistant"}),Object(y.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(y.jsxs)(d.a.Collapse,{id:"basic-navbar-nav",children:[Object(y.jsx)(h.a,{className:"me-auto",children:Object(y.jsx)(h.a.Link,{href:"#home",children:"Documents"})}),Object(y.jsx)(h.a,{className:"justify-content-end",children:i?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("small",{className:"userName",children:["Signed in as ",n.username]}),Object(y.jsx)(g.GoogleLogout,{clientId:"759950908416-hdi0alconb3krbcblsmidir074uvafoj.apps.googleusercontent.com",buttonText:"Sign out",onLogoutSuccess:function(){O(!1),s({})}})]}):Object(y.jsx)(g.GoogleLogin,{clientId:"759950908416-hdi0alconb3krbcblsmidir074uvafoj.apps.googleusercontent.com",buttonText:"Sign in",onSuccess:S,onFailure:S,cookiePolicy:"single_host_origin"})})]})]})}),Object(y.jsx)("div",{className:"accessKeyContainer",children:Object(y.jsxs)("div",{className:"accessKeyInput",children:[Object(y.jsx)("input",{type:"text",value:i?n.accessKey:"Log in with google to get access key"}),i?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{className:"btnToClipboard",onClick:function(){navigator.clipboard.writeText(n.accessKey)},children:"\u274f"}),Object(y.jsx)("button",{className:"btnToClipboard",onClick:K,children:"\u21bb"})]}):Object(y.jsx)(g.GoogleLogin,{clientId:"759950908416-hdi0alconb3krbcblsmidir074uvafoj.apps.googleusercontent.com",buttonText:"Sign in",onSuccess:S,onFailure:S,cookiePolicy:"single_host_origin"})]})}),1==v?Object(y.jsxs)(m.a,{variant:"danger",onClose:function(){return I(!1)},dismissible:!0,children:[Object(y.jsx)(m.a.Heading,{children:"Oops!"}),Object(y.jsx)("p",{children:"You should sign in again"})]}):Object(y.jsx)(y.Fragment,{}),Object(y.jsx)(b.a,{url:"https://measurment-assistant.herokuapp.com/documentation/json"})]})};n(1040);r.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(I,{})}),document.getElementById("root"))},276:function(e,t,n){},996:function(e,t){},998:function(e,t){}},[[1045,1,2]]]);
//# sourceMappingURL=main.63d3a8d5.chunk.js.map